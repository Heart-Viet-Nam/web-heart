(()=>{"use strict";var e={956:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,u){function s(e){try{i(o.next(e))}catch(e){u(e)}}function a(e){try{i(o.throw(e))}catch(e){u(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}i((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(262),u=n(563);t.default=new class{createBlog(e,t,n){return o(this,void 0,void 0,(function*(){try{const{data:n}=yield(0,r.uploadFile)(e.file,"image"),{title:o,description:s,content:a,author:i}=e.body,c={title:o,description:s,content:a,thumbnail:n.path,author:i},d=new u.Blog(c),l=yield d.save();t.status(200).json(l)}catch(e){t.status(500).json(e)}}))}updateBlog(e,t,n){}destroyBlog(e,t,n){}}},857:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,u){function s(e){try{i(o.next(e))}catch(e){u(e)}}function a(e){try{i(o.throw(e))}catch(e){u(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}i((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(563);t.default=new class{createDoctor(e,t,n){return o(this,void 0,void 0,(function*(){try{const n=new r.Doctor(e.body),o=yield n.save();t.status(200).json(o)}catch(e){t.status(500).json(500)}}))}updateDoctor(e,t,n){}destroyDoctor(e,t,n){}}},177:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,u){function s(e){try{i(o.next(e))}catch(e){u(e)}}function a(e){try{i(o.throw(e))}catch(e){u(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}i((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(563),u=n(262);t.default=new class{createEvent(e,t,n){return o(this,void 0,void 0,(function*(){try{const{data:n}=yield(0,u.uploadFile)(e.file,"image"),{title:o,description:s,content:a,author:i}=e.body,c={title:o,description:s,content:a,thumbnail:n.path,author:i},d=new r.Booking(c),l=yield d.save();t.status(200).json(l)}catch(e){t.status(500).json(e)}}))}updateEvent(e,t,n){return o(this,void 0,void 0,(function*(){try{const{}=e.body}catch(e){}}))}destroy(e,t,n){return o(this,void 0,void 0,(function*(){try{const{}=e.body}catch(e){}}))}}},317:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=new class{login(e,t,n){try{t.status(200).render("site/guest/login",{layout:!1})}catch(e){t.status(500).render("status/500",{layout:!1})}}register(e,t,n){try{t.status(200).render("site/guest/register",{layout:!1})}catch(e){t.status(500).render("status/500",{layout:!1})}}}},29:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,u){function s(e){try{i(o.next(e))}catch(e){u(e)}}function a(e){try{i(o.throw(e))}catch(e){u(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}i((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(877);t.default=new class{payment(e,t,n){return o(this,void 0,void 0,(function*(){try{const n=new Map([[1,{priceInUSD:72700,name:"Ruby"}],[2,{priceInUSD:286e3,name:"Sapphire"}],[3,{priceInUSD:62e4,name:"Diamond"}]]),o=`${e.protocol}://${e.headers.host}`,u=yield r.stripe.checkout.sessions.create({payment_method_types:["card"],mode:"payment",line_items:e.body.items.map((e=>{const t=n.get(e.id);return{price_data:{currency:"usd",product_data:{name:null==t?void 0:t.name},unit_amount:null==t?void 0:t.priceInUSD},quantity:e.quantity}})),success_url:`${o}`,cancel_url:`${o}`});t.json({url:u.url})}catch(e){t.status(500).json(e)}}))}}},418:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,u){function s(e){try{i(o.next(e))}catch(e){u(e)}}function a(e){try{i(o.throw(e))}catch(e){u(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}i((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(326),u={cssFile:(0,r.injectFile)("public/css","main"),jsFile:(0,r.injectFile)("public/js","main"),paymentFile:(0,r.injectFile)("public/js","payment")};t.default=new class{homeRender(e,t,n){return o(this,void 0,void 0,(function*(){try{const e=!0;t.status(200).render("site/user/home",{layout:"layouts/user",files:u,home:e})}catch(e){t.status(500).render("status/500",{layout:!1})}}))}activityRender(e,t,n){return o(this,void 0,void 0,(function*(){try{t.status(200).render("site/user/activity")}catch(e){t.status(500).render("status/500",{layout:!1})}}))}invoiceRender(e,t,n){return o(this,void 0,void 0,(function*(){try{t.status(200).render("site/user/invoice")}catch(e){t.status(500).render("status/500",{layout:!1})}}))}profileRender(e,t,n){return o(this,void 0,void 0,(function*(){try{t.status(200).render("site/user/profile")}catch(e){t.status(500).render("status/500",{layout:!1})}}))}aboutRender(e,t,n){return o(this,void 0,void 0,(function*(){try{const e=!0;t.status(200).render("site/user/about",{layout:"layouts/user",files:u,about:e})}catch(e){t.status(500).render("status/500",{layout:!1})}}))}blogsRender(e,t,n){return o(this,void 0,void 0,(function*(){try{const e=!0;t.status(200).render("site/user/blog",{layout:"layouts/user",files:u,social:e})}catch(e){t.status(500).render("status/500",{layout:!1})}}))}eventsRender(e,t,n){return o(this,void 0,void 0,(function*(){try{const e=!0;t.status(200).render("site/user/event",{layout:"layouts/user",files:u,social:e})}catch(e){t.status(500).render("status/500",{layout:!1})}}))}detailBlogRender(e,t,n){return o(this,void 0,void 0,(function*(){try{t.status(200).render("site/user/blog-detail",{layout:"layouts/user"})}catch(e){t.status(500).render("status/500",{layout:!1})}}))}detailEventRender(e,t,n){return o(this,void 0,void 0,(function*(){try{t.status(200).render("site/user/event-detail",{layout:"layouts/user",files:u})}catch(e){t.status(500).render("status/500",{layout:!1})}}))}faqRender(e,t,n){return o(this,void 0,void 0,(function*(){try{const e=!0;t.status(200).render("site/user/faq",{layout:"layouts/user",files:u,about:e})}catch(e){t.status(500).render("status/500",{layout:!1})}}))}bookingRender(e,t,n){return o(this,void 0,void 0,(function*(){try{const e=!0;t.status(200).render("site/user/booking",{layout:"layouts/user",files:u,booking:e})}catch(e){t.status(500).render("status/500",{layout:!1})}}))}history(e,t,n){return o(this,void 0,void 0,(function*(){try{const e=!0;t.status(200).render("site/user/booking-history",{layout:"layouts/user",files:u,booking:e})}catch(e){t.status(500).render("status/500",{layout:!1})}}))}transaction(e,t,n){return o(this,void 0,void 0,(function*(){try{const e=!0;t.status(200).render("site/user/invoice",{layout:"layouts/user",files:u,transaction:e})}catch(e){t.status(500).render("status/500",{layout:!1})}}))}}},844:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(185),r=new o.Schema({title:{type:String,required:!0},description:{type:String,required:!0},content:{type:String,required:!0},thumbnail:{type:String,required:!0},author:{type:o.Schema.Types.ObjectId,ref:"User",required:!0}},{timestamps:{createdAt:"created_at",updatedAt:"updated_at"}});t.default=(0,o.model)("Blog",r)},752:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(185),r=new o.Schema({doctor:{type:o.Schema.Types.ObjectId,ref:"Doctor",required:!0},date:{type:Date,required:!0},time:{type:String,maxlength:20,required:!0},note:{type:String}},{timestamps:{createdAt:"created_at",updatedAt:"updated_at"}});t.default=(0,o.model)("Booking",r)},747:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(185),r=new o.Schema({fullname:{type:String,maxlength:50,required:!0},sex:{type:Number,max:2,required:!0},phone:{type:Number,max:20,required:!0},language:{type:String,maxlength:15,required:!0},email:{type:String,maxlength:30,required:!0},address:{type:String,maxlength:100,required:!0},specialist:{type:String,maxlength:200,required:!0},research:{type:String,maxlength:500},image:{type:String,maxlength:300}},{timestamps:{createdAt:"created_at",updatedAt:"updated_at"}});t.default=(0,o.model)("Doctor",r)},807:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(185),r=new o.Schema({feeling:{type:String},experience:{type:String},suggestion:{type:String},user:{type:o.Schema.Types.ObjectId,ref:"User",required:!0}},{timestamps:{createdAt:"created_at",updatedAt:"updated_at"}});t.default=(0,o.model)("Evaluate",r)},458:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(185),r=new o.Schema({title:{type:String,required:!0},description:{type:String,required:!0},content:{type:String,required:!0},thumbnail:{type:String,required:!0},author:{type:o.Schema.Types.ObjectId,ref:"User",required:!0}},{timestamps:{createdAt:"created_at",updatedAt:"updated_at"}});t.default=(0,o.model)("Event",r)},330:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(185),r=new o.Schema({content:{type:String,required:!0},user:{type:o.Schema.Types.ObjectId,ref:"User",required:!0}},{timestamps:{createdAt:"created_at",updatedAt:"updated_at"}});t.default=(0,o.model)("Question",r)},219:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(185),r=new o.Schema({title:{type:String,required:!0},description:{type:String,required:!0},content:{type:String,required:!0},thumbnail:{type:String,required:!0},author:{type:o.Schema.Types.ObjectId,ref:"User",required:!0}},{timestamps:{createdAt:"created_at",updatedAt:"updated_at"}});t.default=(0,o.model)("User",r)},563:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.User=t.Event=t.Evaluate=t.Question=t.Doctor=t.Blog=t.Booking=void 0;const r=o(n(752));t.Booking=r.default;const u=o(n(844));t.Blog=u.default;const s=o(n(747));t.Doctor=s.default;const a=o(n(330));t.Question=a.default;const i=o(n(807));t.Evaluate=i.default;const c=o(n(458));t.Event=c.default;const d=o(n(219));t.User=d.default},446:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,u){function s(e){try{i(o.next(e))}catch(e){u(e)}}function a(e){try{i(o.throw(e))}catch(e){u(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}i((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.connectDB=void 0;const u=r(n(185));t.connectDB=()=>o(void 0,void 0,void 0,(function*(){const e=process.env.MONGO_URI;try{yield u.default.connect(e),console.log("DB connected successfully")}catch(e){console.log("Connect failed !!!")}}))},737:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.upload=void 0;const r=o(n(738)),u=r.default.memoryStorage();t.upload=(0,r.default)({storage:u})},101:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,u){function s(e){try{i(o.next(e))}catch(e){u(e)}}function a(e){try{i(o.throw(e))}catch(e){u(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}i((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.facebookPassport=void 0;const r=n(210).Strategy;t.facebookPassport=e=>{e.use(new r({clientID:process.env.APP_ID,clientSecret:process.env.APP_SECRET,callbackURL:"/auth/facebook/callback"},((e,t,n)=>o(void 0,void 0,void 0,(function*(){console.log(n)})))))}},649:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,u){function s(e){try{i(o.next(e))}catch(e){u(e)}}function a(e){try{i(o.throw(e))}catch(e){u(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}i((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.googlePassport=void 0;const r=n(743).Strategy;t.googlePassport=e=>{e.use(new r({clientID:process.env.CLIENT_ID,clientSecret:process.env.CLIENT_SECRET,callbackURL:"/auth/google/callback"},((e,t,n,r)=>o(void 0,void 0,void 0,(function*(){console.log(n)})))))}},588:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.sessionStore=void 0;const r=o(n(730));t.sessionStore=r.default.create({mongoUrl:process.env.MONGO_URI,collectionName:"session"})},877:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.stripe=void 0;const r=o(n(174));t.stripe=new r.default(process.env.STRIPE_SECRET_KEY,{apiVersion:"2020-08-27"})},746:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(860)),u=o(n(511)),s=r.default.Router();s.get("/google",u.default.authenticate("google",{scope:"profile"})),s.get("/google/callback",u.default.authenticate("google",{failureRedirect:"/"}),((e,t,n)=>{t.redirect("/vn-vi/user")})),s.get("/facebook",u.default.authenticate("facebook",{scope:"email"})),s.get("/facebook/callback",u.default.authenticate("facebook",{failureRedirect:"/"}),((e,t,n)=>{t.redirect("/")})),t.default=s},837:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(189)),u=o(n(1)),s=o(n(746)),a=o(n(209));t.default=e=>{e.use("/temp",a.default),e.use("/auth",s.default),e.use("/",r.default),e.use("/",u.default)}},189:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(860)),u=o(n(317)),s=o(n(418)),a=o(n(29)),i=r.default.Router();i.get("/transaction-history",s.default.transaction),i.get("/login",u.default.login),i.get("/booking-history",s.default.history),i.get("/booking",s.default.bookingRender),i.get("/event/:slug",s.default.detailEventRender),i.get("/events",s.default.eventsRender),i.get("/blog/:slug",s.default.detailBlogRender),i.get("/blogs",s.default.blogsRender),i.get("/faq",s.default.faqRender),i.get("/about-us",s.default.aboutRender),i.post("/checkout-payment",a.default.payment),i.get("/",s.default.homeRender),t.default=i},1:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(860)).default.Router();r.get("*",((e,t,n)=>{t.status(200).render("status/404",{layout:!1})})),t.default=r},209:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(860)),u=o(n(956)),s=o(n(177)),a=o(n(857)),i=n(737),c=r.default.Router();c.post("/blog",i.upload.single("image"),u.default.createBlog),c.post("/event",s.default.createEvent),c.post("/doctor",i.upload.single("image"),a.default.createDoctor),t.default=c},338:function(e,t,n){var o="dist",r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const u=r(n(860)),s=r(n(423)),a=r(n(470)),i=r(n(455)),c=r(n(508)),d=r(n(158)),l=r(n(383)),f=r(n(806)),p=r(n(916)),y=r(n(511)),v=n(828);r(n(142)).default.config();const h=n(588),_=r(n(837)),g=n(446),m=n(649),b=n(101),j=(0,u.default)(),w=process.env.PORT||8080;j.use((0,a.default)("dev")),j.use(f.default.contentSecurityPolicy({directives:{"frame-src":["'self'","https://www.youtube.com","https://youtube.com"]}})),j.use((0,c.default)({name:"access-token",secret:process.env.SECRET_KEY||(0,v.v4)(),resave:!1,saveUninitialized:!1,cookie:{secure:!0,maxAge:36e5},store:h.sessionStore})),(0,b.facebookPassport)(y.default),(0,m.googlePassport)(y.default),j.use(y.default.initialize()),j.use(y.default.session()),j.use((0,l.default)()),j.use((0,i.default)({level:6,threshold:1e4,filter:(e,t)=>!e.headers["x-no-compression"]&&i.default.filter(e,t)}));const x="../assets/lib";j.use("/js",[u.default.static(s.default.join(o,`${x}/jquery-validation`)),u.default.static(s.default.join(o,`${x}/jquery-easing`)),u.default.static(s.default.join(o,`${x}/jquery`)),u.default.static(s.default.join(o,`${x}/bootstrap/js`)),u.default.static(s.default.join(o,`${x}/lazysizes`))]),j.use("/css",[u.default.static(s.default.join(o,`${x}/bootstrap/css`)),u.default.static(s.default.join(o,`${x}/simple-line-icons`))]),j.use("/css/fonts/@fortawesome",u.default.static(s.default.join(o,`${x}/font-awesome/webfonts`))),j.use(u.default.static(s.default.join(o,"../public"))),j.use((0,p.default)(s.default.join(o,"../public/img/favicon.png"))),j.use(u.default.urlencoded({extended:!0})),j.use(u.default.json()),j.set("views",s.default.join(o,"../views")),j.set("view engine","ejs"),j.use(d.default),(0,_.default)(j),(0,g.connectDB)(),j.listen(w,(()=>{console.log(`Server is running on port ${w}`)}))},326:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.injectFile=void 0;const r=o(n(147)),u=o(n(423)),s=o(n(517));t.injectFile=(e,t)=>{const n=u.default.join("dist/utils","..","..",e),o=r.default.readdirSync(n);return o[s.default.findIndex(o,(e=>e.includes(t)),0)]}},262:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,u){function s(e){try{i(o.next(e))}catch(e){u(e)}}function a(e){try{i(o.throw(e))}catch(e){u(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}i((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.uploadFile=void 0;const u=r(n(941)),s=r(n(167));t.uploadFile=(e,t)=>o(void 0,void 0,void 0,(function*(){const n=new u.default;return n.append(t,null==e?void 0:e.buffer,null==e?void 0:e.originalname),yield s.default.post(process.env.DOMAIN_UPLOAD,n,{headers:{"Content-Type":"multipart/form-data","X-HelloGIT-Key":process.env.SECRET_KEY_UPLOAD,"X-HelloGIT-Host":process.env.HOSTNAME_UPLOAD}})}))},167:e=>{e.exports=require("axios")},455:e=>{e.exports=require("compression")},383:e=>{e.exports=require("connect-flash")},730:e=>{e.exports=require("connect-mongo")},142:e=>{e.exports=require("dotenv")},860:e=>{e.exports=require("express")},158:e=>{e.exports=require("express-ejs-layouts")},508:e=>{e.exports=require("express-session")},941:e=>{e.exports=require("form-data")},806:e=>{e.exports=require("helmet")},517:e=>{e.exports=require("lodash")},185:e=>{e.exports=require("mongoose")},470:e=>{e.exports=require("morgan")},738:e=>{e.exports=require("multer")},511:e=>{e.exports=require("passport")},210:e=>{e.exports=require("passport-facebook")},743:e=>{e.exports=require("passport-google-oauth20")},423:e=>{e.exports=require("path")},916:e=>{e.exports=require("serve-favicon")},174:e=>{e.exports=require("stripe")},828:e=>{e.exports=require("uuid")},147:e=>{e.exports=require("fs")}},t={};!function n(o){var r=t[o];if(void 0!==r)return r.exports;var u=t[o]={exports:{}};return e[o].call(u.exports,u,u.exports,n),u.exports}(338)})();